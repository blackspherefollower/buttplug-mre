<!DOCTYPE html>
<html lang="en">

<head>
  <title>BP Interaction MRE</title>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <script>
   // If we're not HTTPS, bluetooth won't be found. Force upgrade.
   //if (location.protocol != 'https:') {
   //  location.href = 'https:' + window.location.href.substring(window.location.protocol.length);
   //}
  </script>
  <script src="https://cdn.jsdelivr.net/npm/buttplug@0.13.1/dist/web/buttplug.min.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/validator@13.0.0/validator.min.js" defer></script>
  <!-- import the webpage's javascript file -->
  <script src="/webapp.js" defer></script>
</head>
<body>
    <h1>BP Interaction MRE</h1>
    <div id="status"></div>
    <button onclick="getStatus()">Get Status</button>
    <div>
        <h2>
          Share toys with others
        </h2>
        <span style="color:#00f; font-size: 4em"><b id="room-id"></b></span>
        <div id="local-no-bluetooth">
          <p>Local connection requires using <a href="https://chrome.google.com">Google Chrome</a> (or another Blink based
            browser, or if on iOS: <a href="https://apps.apple.com/us/app/webble/id1193531073">WebBLE</a>).</p>
          <p>If you are seeing this message with Chrome, make sure you are accessing the site from either localhost or a
            secure context (https://), or if you are on linux, go to chrome://flags and enable Experimental Web Platform
            Features.</p>
          <p><a href="https://intiface.com/desktop">Intiface Desktop</a> support for non-WebBluetooth browsers has been hacked into this example.
          </p>
        </div>
        <div id="local-error" style="color:#f00; display:none;"></div>
        <div id="local-ident">
          <button id="buttplug-local-connect" onclick="startLocalConnection();">
            Connect in-browser
          </button>
          <button id="buttplug-ws-connect" onclick="startWsConnection();">
            Connect to Intiface Desktop
          </button>
        </div>
        <div id="local-control" style="display:none;">
          <div>
            <button id="buttplug-local-button">
              Start Scanning
            </button>
          </div>
          <div id="local-device-list"></div>
        </div>
      </div>
    </div>
</body>
</html>
